(function(c,a,i,u,o,m,f,d,g,y){"use strict";const{FormSection:h,FormInput:p}=o.Forms,E=f.findByProps("showUserProfile"),T=f.findByStoreName("UserStore");u.stylesheet.createThemedStyleSheet({subText:{fontSize:14,marginLeft:16,marginRight:16,color:g.semanticColors.TEXT_MUTED},textLink:{color:g.semanticColors.TEXT_LINK}});function I(e){let{selection:t}=e;const n=m.useProxy(a.storage.selections[t]);return React.createElement(d.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(o.Button,{style:{margin:16},color:"brand",size:o.Button.Sizes.MEDIUM,look:o.Button.Looks.FILLED,onPress:async function(){E.showUserProfile({userId:T.getCurrentUser().id})},text:"Preview your profile"}),React.createElement(h,{title:"Basic",titleStyleType:"no_border"},React.createElement(p,{required:!0,autoFocus:!0,title:"Your console IP",value:n.console_ip,placeholder:"Discord",onChange:function(r){return n.console_ip=r}})))}const{FormText:S}=o.Forms,w=a.storage;function P(){async function e(){l.onUnload(),l.onLoad()}return React.createElement(d.TouchableOpacity,{onPress:e},React.createElement(S,{style:{marginRight:12}},"UPDATE"))}function v(){const e=u.NavigationNative.useNavigation();return y.useEffect(function(){e.setOptions({headerRight:P})},[]),React.createElement(I,{selection:w.selected})}var N=function(e){return e[e.PLAYING=0]="PLAYING",e[e.STREAMING=1]="STREAMING",e[e.LISTENING=2]="LISTENING",e[e.WATCHING=3]="WATCHING",e[e.COMPETING=5]="COMPETING",e}(N||{});const s=a.storage;typeof s.selected?.length!="number"&&Object.assign(s,{selected:"default",selections:{default:R()}});function R(){return{console_ip:"192.168.1.7"}}async function L(e){try{const t=await fetch(e+"/popup.ps3@info15");if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return{message:(await t.text()).trim()}}catch(t){return console.error("Failed to fetch popup info:",t),{error:t.message}}}async function G(e){if(typeof e!="string")throw new Error("You must provide your console ip");const t="http://"+e;var n=null;try{if(n=await fetch(t),!n.ok)throw new Error("Cannot ping console");const r=L(t);i.logger.log("[PS3] "+r)}catch(r){throw r}}var l={onLoad:async function(){i.logger.log("[PS3] Hello world!"),setInterval(function(){G(s.selections[s.selected])},1e3)},onUnload:function(){i.logger.log("[PS3] Goodbye, world.")},settings:v};return c.default=l,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.plugin,vendetta,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.metro,vendetta.metro.common.ReactNative,vendetta.ui,window.React);
