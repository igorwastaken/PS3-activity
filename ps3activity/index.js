(function(i,c,a,l,n,m,d,f,g,y){"use strict";const{FormSection:p,FormInput:h}=n.Forms,E=d.findByProps("showUserProfile"),T=d.findByStoreName("UserStore");l.stylesheet.createThemedStyleSheet({subText:{fontSize:14,marginLeft:16,marginRight:16,color:g.semanticColors.TEXT_MUTED},textLink:{color:g.semanticColors.TEXT_LINK}});function P(t){let{selection:e}=t;const r=m.useProxy(c.storage.selections[e]);return React.createElement(f.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(n.Button,{style:{margin:16},color:"brand",size:n.Button.Sizes.MEDIUM,look:n.Button.Looks.FILLED,onPress:async function(){E.showUserProfile({userId:T.getCurrentUser().id})},text:"Preview your profile"}),React.createElement(p,{title:"Basic",titleStyleType:"no_border"},React.createElement(h,{required:!0,autoFocus:!0,title:"Your console IP",value:r.console_ip,placeholder:"Discord",onChange:function(o){return r.console_ip=o}})))}const{FormText:S}=n.Forms,w=c.storage;function I(){async function t(){u.onUnload(),u.onLoad()}return React.createElement(f.TouchableOpacity,{onPress:t},React.createElement(S,{style:{marginRight:12}},"UPDATE"))}function v(){const t=l.NavigationNative.useNavigation();return y.useEffect(function(){t.setOptions({headerRight:I})},[]),React.createElement(P,{selection:w.selected})}var N=function(t){return t[t.PLAYING=0]="PLAYING",t[t.STREAMING=1]="STREAMING",t[t.LISTENING=2]="LISTENING",t[t.WATCHING=3]="WATCHING",t[t.COMPETING=5]="COMPETING",t}(N||{});const s=c.storage;typeof s.selected?.length!="number"&&Object.assign(s,{selected:"default",selections:{default:L()}});function L(){return{console_ip:"192.168.1.7"}}async function R(t){l.FluxDispatcher.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:{name:t.name,type:t.type,details:t.details,state:t.state,timestamps:t.timestamps,assets:t.assets,flags:t.flags},pid:1608,socketId:"PS3Activity@Vendetta"})}async function C(t){try{const e=await fetch(t+"/popup.ps3@info15");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return{message:(await e.text()).trim()}}catch(e){return console.error("Failed to fetch popup info:",e),{error:e.message}}}async function A(t){if(typeof t!="string")throw new Error("You must provide your console ip");const e="http://"+t;var r=null;await R({name:"PlayStation",type:0,flags:1});try{if(r=await fetch(e),!r.ok)throw new Error("Cannot ping console");const o=await C(e);a.logger.log("[PS3] "+o)}catch(o){throw a.logger.log("[PS3] "+o),o}}var u={onLoad:async function(){a.logger.log("[PS3] Hello world!"),await A(s.selections[s.selected])},onUnload:function(){a.logger.log("[PS3] Goodbye, world.")},settings:v};return i.default=u,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta.plugin,vendetta,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.metro,vendetta.metro.common.ReactNative,vendetta.ui,window.React);
