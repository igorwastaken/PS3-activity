(function(c,i,s,u,n,m,f,d,g,y){"use strict";const{FormSection:h,FormInput:p}=n.Forms,E=f.findByProps("showUserProfile"),T=f.findByStoreName("UserStore");u.stylesheet.createThemedStyleSheet({subText:{fontSize:14,marginLeft:16,marginRight:16,color:g.semanticColors.TEXT_MUTED},textLink:{color:g.semanticColors.TEXT_LINK}});function w(e){let{selection:t}=e;const r=m.useProxy(i.storage.selections[t]);return React.createElement(d.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(n.Button,{style:{margin:16},color:"brand",size:n.Button.Sizes.MEDIUM,look:n.Button.Looks.FILLED,onPress:async function(){E.showUserProfile({userId:T.getCurrentUser().id})},text:"Preview your profile"}),React.createElement(h,{title:"Basic",titleStyleType:"no_border"},React.createElement(p,{required:!0,autoFocus:!0,title:"Your console IP",value:r.console_ip,placeholder:"Discord",onChange:function(o){return r.console_ip=o}})))}const{FormText:S}=n.Forms,P=i.storage;function I(){async function e(){l.onUnload(),l.onLoad()}return React.createElement(d.TouchableOpacity,{onPress:e},React.createElement(S,{style:{marginRight:12}},"UPDATE"))}function N(){const e=u.NavigationNative.useNavigation();return y.useEffect(function(){e.setOptions({headerRight:I})},[]),React.createElement(w,{selection:P.selected})}var v=function(e){return e[e.PLAYING=0]="PLAYING",e[e.STREAMING=1]="STREAMING",e[e.LISTENING=2]="LISTENING",e[e.WATCHING=3]="WATCHING",e[e.COMPETING=5]="COMPETING",e}(v||{});const a=i.storage;typeof a.selected?.length!="number"&&Object.assign(a,{selected:"default",selections:{default:R()}});function R(){return{console_ip:"192.168.1.7"}}async function L(e){try{const t=await fetch(e+"/popup.ps3@info15");if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return{message:(await t.text()).trim()}}catch(t){return console.error("Failed to fetch popup info:",t),{error:t.message}}}async function G(e){if(typeof e!="string")throw new Error("You must provide your console ip");const t="http://"+e;var r=null;try{if(r=await fetch(t),!r.ok)throw new Error("Cannot ping console");const o=await L(t);s.logger.log("[PS3] "+o)}catch(o){throw s.logger.log("[PS3] "+o),o}}var l={onLoad:async function(){s.logger.log("[PS3] Hello world!"),await G(a.selections[a.selected])},onUnload:function(){s.logger.log("[PS3] Goodbye, world.")},settings:N};return c.default=l,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.plugin,vendetta,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.metro,vendetta.metro.common.ReactNative,vendetta.ui,window.React);
